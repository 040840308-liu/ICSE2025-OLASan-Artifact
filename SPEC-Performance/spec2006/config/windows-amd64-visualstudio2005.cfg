############################################################################
# This is a sample config file. It was tested with:                                                              
#                                                                                                                
#      Compiler name/version:       Microsoft (R) C/C++ Optimizing Compiler 
#                                   Version 14.00.50727.42 for x64 Visual Studio 2005
#      Operating system version:    Microsoft(R) Windows(R) XP Professional x64 Edition
#                                   5.2.3790 Service Pack 1 Build 3790                                                             
#      Hardware:                    AMD Opteron 252 
#                                   AMD64 Family 15 Model 37 Stepping 1 AuthenticAMD                                                                      
#                                                                                                                
# If your platform uses different versions, different
# hardware or operates in a different mode (for 
# example, 32- vs. 64-bit mode), there is the possibiliy
# that this configuration file may not work as-is. 
# 
# Note that issues with compilation should be directed
# to the compiler vendor. Information about SPEC technical
# support can be found in the techsupport document in the
# Docs directory of your benchmark installation.
#
# Also note that this is a sample configuration. It
# is expected to work for the environment in which
# it was tested; it is not guaranteed that this is 
# the config file that will provide the best performance.
# 
# Note that you might find a more recent config file for                                                         
# your platform with the posted results at                                                                       
# http://www.spec.org/cpu2006

######## Note: This config cannot be used for a reportable run:
#
#  - It cannot be used for an integer reportable run because Visual C++
#    2005 does not support some C99 features used by 462.libquantum
#
#  - For a floating point run, you could use this config file to
#    compile only the C/C++ benchmarks, since Visual Studio 2005 
#    does not support Fortran.  
#
# The runlist below by default excludes the benchmarks that won't work.  
# If you don't specify a runlist on the command line, you'll get all the
# ones that are expected to work with Visual Studio 2005: 
runlist         = all_except_fortran, ^libquantum
##########################################################################

tune            = all
check_md5       = 1

################################################################
# Compiler section
################################################################
CC      = cl
CXX     = cl -EHsc
CLD     = link
CXXLD   = link

default=default:
LDOUT = -out:$@.exe 
PORTABILITY = -DSPEC_CPU_P64
# Increased stack reserve required for xalancbmk, gcc
LDOPT = -stack:10000000
# Required for gcc
EXTRA_CFLAGS = -Dalloca=_alloca

################################################################
# Portability section
################################################################
400.perlbench=default=default=default:
CPORTABILITY   = -DSPEC_CPU_WIN64

403.gcc=default=default=default:
CPORTABILITY   = -DSPEC_CPU_WIN64

444.namd=default=default=default:
CXXPORTABILITY = -TP

447.dealII=default=default=default:
CXXPORTABILITY = -DDEAL_II_MEMBER_VAR_SPECIALIZATION_BUG -DSPEC_CPU_WINDOWS_MSVC

453.povray=default=default=default:
CXXPORTABILITY = -DSPEC_CPU_NEED_INVHYP -DNEED_INVHYP

464.h264ref=default=default=default:
CPORTABILITY   = -DSPEC_CPU_NO_INTTYPES -DWIN32

471.omnetpp=default=default=default:
CXXPORTABILITY = -DSPEC_CPU_WIN64

483.xalancbmk=default=default=default:
CXXPORTABILITY = -DWIN32 -Zc:wchar_t-

################################################################
# Baseline Tuning Flags
# default baseline for int and fp 2006
################################################################

# PGO is disallowed in base, so use O2GL
default=default=default=default:
OPTIMIZE = -Zi -O2 -GL -GS- -favor:AMD64 -D_SECURE_SCL=0
EXTRA_LDFLAGS = -ltcg -debug -opt:icf,ref -incremental:no

# use PGO for peak, enable fp:fast when possible
# fdo_make_clean_pass2 removes the executable files, 
# but preserves the object files that are reused for the optimized build.
default=peak=default=default:
OPTIMIZE = -Zi -O2 -GL -GS- -favor:AMD64 -fp:fast -D_SECURE_SCL=0
PASS1_LDFLAGS = -ltcg:PGI -debug -opt:icf,ref -incremental:no
PASS2_LDFLAGS = -ltcg:PGO -debug -opt:icf,ref -incremental:no
fdo_make_clean_pass2 = del /q *.exe

444.namd,453.povray,473.astar,482.sphinx3=peak=default=default:
OPTIMIZE = -Zi -O2 -GL -GS- -favor:AMD64 -D_SECURE_SCL=0
PASS1_LDFLAGS = -ltcg:PGI -debug -opt:icf,ref -incremental:no
PASS2_LDFLAGS = -ltcg:PGO -debug -opt:icf,ref -incremental:no
fdo_make_clean_pass2 = del /q *.exe

